# 매크로와 선행처리기에 대해 공부해보자


### 1. 선행처리

1. 컴파일 이전에 선행처리기를 통해 선행처리를 한다
2. 선행처리를 거친 결과물도 여전히 소스파일이다
   * 그저 기존의 선행처리 명령문을 기반으로 소스코드의 일부를 수정한다
   * 그리고 대부분의 수정은 치환이다
3. ex: #define PI 3.1415
   * 이때 #define은 지시자, PI는 매크로, 3.1415는 매크로 몸체이다
   * 이러한 경우는 매크로 상수라고 부른다


### 2. 매크로 함수

1. ex: #define SQUARE(X) X*X
   * 이런식으로 매개변수가 매크로에 있으면 매크로 함수이다
   * 이 경우도 단순한 치환이 이루어진다
2. 선행처리기는 단순한 치환만을 하기 때문에 SQUARE(3+2) 이런식으로 하면, 3+2*3+2 된다. 즉 의도와는 다른 결과물이 나올 수 있으니 유의해서 사용해야 한다!
3. 즉 이를 방지하기 위해서는 매크로 몸체에 괄호를 마구마구 쳐주자..
   * ex: #define SQUARE(X) ((X)*(X))
4. 매크로 정의 시 먼저 정의된 매크로도 사용가능하다


### 3. 매크로 함수의 장단점

1. 장점
   * 일반 함수보다 실행속도가 빠르다
   * 자료형에 구애 받지 않을 수 있다
2. 단점
   * 정의하기가 너무 까다롭다
   * 디버깅이 어렵다


### 4. 조건부 컴파일

1. #if: true ~ #endif
   * 이것을 이용해 조건부 컴파일이 가능하다, 즉 참일 경우 사이의 코드가 삽입되고, 거짓이면 삭제된다
   * else, elif 추가 가능하다
2. #ifdef: 정의 ~ #endif
   * 이것을 이용해 매크로가 정의되었을 경우 조건부 컴파일을 수행한다
   * 이때는 매크로의 몸체는 생략해도 된다. 정의여부가 중요하기 때문이다
   * else만 추가 가능하다
  

### 5. 문자열과 매크로

1. 문자열 안에서는 매크로의 매개변수 치환이 일어나지 않는다!
   * ex: #define JOB(A, B) "A의 직업은 B입니다." 이럴경우, A와 B에 무엇을 넣어도, "A의 직업은 B입니다."가 출력된다
2. 따라서 매크로에서 문자과 매개변수를 쓰려면 #연산자를 사용해야 한다
   * ex: #define JOB(A,B) #A "의 직업은" #B "입니다."
3. ##연산자를 사용할 경우 앞과 뒤를 결합해준다
